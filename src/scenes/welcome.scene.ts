import {
  Command,
  Scene,
  Step,
  Wait,
} from '../infrastructure/grammy/decorators';
import { SceneContext } from '../infrastructure/grammy/grammy.context';
import { RegistrationScene } from './registration.scene';

@Scene()
export class WelcomeScene {
  private readonly features = [
    `üè¶ <b>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏:</b> –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ —Å–≤–æ–∏ —Å—á–µ—Ç–∞ –∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–π—Ç–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.`,
    `üíº <b>–†–∞–∑–≤–∏—Ç–∏–µ –±–∏–∑–Ω–µ—Å–∞:</b> –ò—Å—Å–ª–µ–¥—É–π—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å–∞–º–∏.`,
    `üìà <b>–¢–æ—Ä–≥–æ–≤–ª—è –Ω–∞ —Ä—ã–Ω–∫–µ:</b> –£—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ —Ä—ã–Ω–æ—á–Ω—ã—Ö —Å–¥–µ–ª–∫–∞—Ö, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏ –æ—Ç–≤–µ—á–∞–π—Ç–µ –Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.`,
    `ü§ù <b>–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã:</b> –°–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞–π—Ç–µ –¥–µ—Ç–∞–ª–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ –∏–º–∏.`,
  ];

  @Step()
  async onSceneEnter(ctx: SceneContext) {
    await ctx.reply('üåü –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ CityPulse! üåü');
    await ctx.reply(
      `–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –º–∏—Ä –±–∏–∑–Ω–µ—Å-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –≥–¥–µ –≤—ã –º–æ–∂–µ—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –±–∏–∑–Ω–µ—Å–æ–º, –≤–µ—Å—Ç–∏ —Ç–æ—Ä–≥–æ–≤–ª—é –Ω–∞ —Ä—ã–Ω–∫–µ –∏ –∑–∞–∫–ª—é—á–∞—Ç—å –≤—ã–≥–æ–¥–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã.\r\n–í–∞—Å –∂–¥–µ—Ç:`,
    );
    await ctx.reply(this.features.map((feat) => `‚Ä¢ ${feat}`).join('\r\n'), {
      parse_mode: 'HTML',
    });

    await ctx.reply(
      '–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã /register.',
    );

    await ctx.reply(
      '–ï—Å–ª–∏ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–º–æ—â—å, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /help.\r\n\r\n–ü–æ—Ä–∞ –Ω–∞—á–∞—Ç—å —Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ—é —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫—É—é –∏–º–ø–µ—Ä–∏—é –≤ –º–∏—Ä–µ City Pulse! üöÄ',
    );
  }

  @Wait('REGISTER_COMMAND')
  @Command('register')
  async onRegisterCommand(ctx: SceneContext) {
    ctx.scene.call(RegistrationScene.name);
  }

  // @Label('REGISTRATION_END')
  // onRegistrationEnd() {}
}
